<!DOCTYPE html>

<!-- Auto Generated with Sencha Architect -->
<!-- Modifications to this file will be overwritten. -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>sogDirectory</title>
   
    <link rel="stylesheet" href="resource/style.css" id="style.css">
    <link rel="stylesheet" href="resources/css/app.css" id="app.css">
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script src="sencha-touch-all.js" id="sencha-touch-all.js"></script>
    <script src="ux/AccordionList.js" id="AccordionList.js"></script>
    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script>
	//---------App variable--------//
    	var directionsDisplay;
	var directionsService = new google.maps.DirectionsService();
        var currLatitude;
	var currLongitude;
        var appName = "Team Georgia Directory";
	var myLatlng;
	var Ext = Ext || {};
        Ext.theme = {
            name: "Default"
        };
	
        //------- Url For testing-------//
	//var webServiceUrl="http://50.23.221.50/ContactDirectory/CDService/";
	//------- Live Url -------//
	var webServiceUrl="http://directory.doas.ga.gov/Services/CDservice/";
	
	
	function onBodyLoad(){
	    document.addEventListener("deviceready", onDeviceReady, false);
	}
	
	function onBackPress(){
	    var msgStatus=$('.x-msgbox').css('display');
	    if(Ext.Viewport.getMasked()){
		Ext.Viewport.unmask();
	    }
	    
	    if(Ext.getCmp('employeeOptions'))
	    {
		if(Ext.getCmp('employeeOptions').getHidden())
		{
		    Ext.getCmp('employeeOptions').destroy();
		}
		else
		{
		    Ext.getCmp('employeeOptions').destroy();
		    return false;    
		}
	    }
	    
	    if(Ext.getCmp('popupNotify'))
	    {
		Ext.getCmp('popupNotify').destroy();
		return false;
	    }
	    
	    if(msgStatus!="block")
	    {
		var id= $('.x-button-back:visible').attr('id');
		if(id){
		    Ext.getCmp(id).fireEvent('tap');    
		}
		else{
		    Ext.Msg.confirm(appName, "Are you sure you want to quit?", function(e){
			if(e=="yes")
			{
			    navigator.app.exitApp();
			}
		    });
		}
	    }
	    
	}
	
	function onDeviceReady(){
	    document.addEventListener("backbutton", onBackPress, false);
	    document.addEventListener('onDeviceOnline', onDeviceOnline, false);
	    if((navigator.network.connection.type).toUpperCase() != "NONE" && (navigator.network.connection.type).toUpperCase() != "UNKNOWN")
	    {
	        //this.onDeviceOnline();
	    }
	    else
	    {
	        Ext.Msg.alert(appName,'Internet Connection Required.',function(){
		    navigator.app.exitApp();
	        });
	    }
	}
		
	function onDeviceOnline(){
	    //Ext.Msg.alert('Internet Connection Required.');
	}
	</script>
</head>
<body onload="onBodyLoad();">
	<!--  <input type="button" value="click me" onclick="onBackPress()"/>-->
</body>
</html>